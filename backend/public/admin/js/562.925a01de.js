"use strict";(self["webpackChunksherlock_godjango_admin_ui"]=self["webpackChunksherlock_godjango_admin_ui"]||[]).push([[562],{6562:(e,l,t)=>{t.r(l),t.d(l,{default:()=>I});var n=t(9835),a=t(7256),o=t(499),i=t(9302),u=t(6970);const c={class:"text-h6"},d={class:"text-subtitle2"},s={class:"text-subtitle2"},r={class:"text-subtitle2"},m={class:"text-subtitle2"},p=(0,n.aZ)({props:{client:null},emits:["remove","edit"],setup(e,{emit:l}){const t=e;return(e,a)=>{const o=(0,n.up)("q-icon"),i=(0,n.up)("q-card-section"),p=(0,n.up)("q-btn"),v=(0,n.up)("q-card-actions"),f=(0,n.up)("q-card");return(0,n.wg)(),(0,n.j4)(f,null,{default:(0,n.w5)((()=>[(0,n.Wm)(i,null,{default:(0,n.w5)((()=>{var e;return[(0,n._)("div",c,(0,u.zw)(t.client.name),1),(0,n._)("div",d,(0,u.zw)(t.client.description),1),(null===(e=t.client.users)||void 0===e?void 0:e.length)?((0,n.wg)(),(0,n.iD)(n.HY,{key:0},[(0,n._)("div",s,[(0,n.Wm)(o,{name:"mdi-account",class:"q-mr-sm"}),(0,n.Uk)((0,u.zw)(t.client.users[0].name),1)]),(0,n._)("div",r,[(0,n.Wm)(o,{name:"mdi-email",class:"q-mr-sm"}),(0,n.Uk)((0,u.zw)(t.client.users[0].email),1)]),(0,n._)("div",m,[(0,n.Wm)(o,{name:"mdi-phone",class:"q-mr-sm"}),(0,n.Uk)((0,u.zw)(t.client.users[0].phone),1)])],64)):(0,n.kq)("",!0)]})),_:1}),(0,n.Wm)(v,null,{default:(0,n.w5)((()=>[(0,n.Wm)(p,{onClick:a[0]||(a[0]=e=>l("edit",t.client.id)),outline:"",icon:"mdi-pencil",color:"primary",label:"Editar",dense:""}),(0,n.Wm)(p,{onClick:a[1]||(a[1]=e=>l("remove",t.client.id)),outline:"",icon:"mdi-delete",color:"negative",label:"Eliminar",dense:""})])),_:1})])),_:1})}}});var v=t(4458),f=t(3190),w=t(2857),y=t(1821),h=t(4455),_=t(9984),b=t.n(_);const g=p,q=g;b()(p,"components",{QCard:v.Z,QCardSection:f.Z,QIcon:w.Z,QCardActions:y.Z,QBtn:h.Z});var W=t(1957),V=t(33),k=function(e,l,t,n){function a(e){return e instanceof t?e:new t((function(l){l(e)}))}return new(t||(t=Promise))((function(t,o){function i(e){try{c(n.next(e))}catch(l){o(l)}}function u(e){try{c(n["throw"](e))}catch(l){o(l)}}function c(e){e.done?t(e.value):a(e.value).then(i,u)}c((n=n.apply(e,l||[])).next())}))};const x=(0,n._)("div",{class:"text-body1"},"Datos del Cliente",-1),C=(0,n._)("div",{class:"text-body1"},"Datos del Manager",-1),Z=(0,n.aZ)({props:{client:null},emits:["completed","cancel"],setup(e,{emit:l}){const t=e,i=(0,o.iH)({description:"",name:""}),u=(0,o.iH)({email:"",name:"",phone:"",role_id:0,password:"",password_confirmation:""});function c(){return k(this,void 0,void 0,(function*(){V.j7.loading();try{let e;t.client?e=(yield a.$api.patch(`clients/${t.client.id}`,i.value)).data:(u.value&&(i.value.user=u.value),e=(yield a.$api.post("clients",i.value)).data),l("completed",e.data)}catch(e){V.j7.axiosError(e)}V.j7.loading(!1)}))}return(0,n.wF)((()=>{t.client&&(i.value={description:t.client.description,name:t.client.name},u.value=void 0)})),(e,t)=>{const a=(0,n.up)("q-input"),o=(0,n.up)("q-card-section"),d=(0,n.up)("q-btn"),s=(0,n.up)("q-card-actions"),r=(0,n.up)("q-form"),m=(0,n.up)("q-card");return(0,n.wg)(),(0,n.j4)(m,null,{default:(0,n.w5)((()=>[(0,n.Wm)(r,{onSubmit:(0,W.iM)(c,["prevent"])},{default:(0,n.w5)((()=>[(0,n.Wm)(o,{class:"q-gutter-y-sm"},{default:(0,n.w5)((()=>[x,(0,n.Wm)(a,{modelValue:i.value.name,"onUpdate:modelValue":t[0]||(t[0]=e=>i.value.name=e),required:"",type:"text",label:"Nombre"},null,8,["modelValue"]),(0,n.Wm)(a,{modelValue:i.value.description,"onUpdate:modelValue":t[1]||(t[1]=e=>i.value.description=e),required:"",type:"textarea",label:"Detalles"},null,8,["modelValue"])])),_:1}),u.value?((0,n.wg)(),(0,n.j4)(o,{key:0,class:"q-gutter-y-sm"},{default:(0,n.w5)((()=>[C,(0,n.Wm)(a,{modelValue:u.value.name,"onUpdate:modelValue":t[2]||(t[2]=e=>u.value.name=e),type:"text",label:"Nombre"},null,8,["modelValue"]),(0,n.Wm)(a,{modelValue:u.value.email,"onUpdate:modelValue":t[3]||(t[3]=e=>u.value.email=e),type:"email",label:"Email"},null,8,["modelValue"]),(0,n.Wm)(a,{modelValue:u.value.phone,"onUpdate:modelValue":t[4]||(t[4]=e=>u.value.phone=e),type:"tel",label:"Telefono"},null,8,["modelValue"]),(0,n.Wm)(a,{modelValue:u.value.password,"onUpdate:modelValue":t[5]||(t[5]=e=>u.value.password=e),type:"password",label:"Password"},null,8,["modelValue"]),(0,n.Wm)(a,{modelValue:u.value.password_confirmation,"onUpdate:modelValue":t[6]||(t[6]=e=>u.value.password_confirmation=e),type:"password",label:"Repita Password"},null,8,["modelValue"])])),_:1})):(0,n.kq)("",!0),(0,n.Wm)(s,null,{default:(0,n.w5)((()=>[(0,n.Wm)(d,{color:"primary",outlined:"",label:"Cancelar",onClick:t[7]||(t[7]=e=>l("cancel"))}),(0,n.Wm)(d,{color:"primary",icon:"mdi-check",label:"Guardar",type:"submit"})])),_:1})])),_:1},8,["onSubmit"])])),_:1})}}});var Q=t(8326),E=t(6611);const j=Z,U=j;b()(Z,"components",{QCard:v.Z,QForm:Q.Z,QCardSection:f.Z,QInput:E.Z,QCardActions:y.Z,QBtn:h.Z});var D=function(e,l,t,n){function a(e){return e instanceof t?e:new t((function(l){l(e)}))}return new(t||(t=Promise))((function(t,o){function i(e){try{c(n.next(e))}catch(l){o(l)}}function u(e){try{c(n["throw"](e))}catch(l){o(l)}}function c(e){e.done?t(e.value):a(e.value).then(i,u)}c((n=n.apply(e,l||[])).next())}))};const H=(0,n._)("div",{class:"text-h6"},"Administración de Clientes",-1),$={class:"text-subtitle2"},z={class:"row q-col-gutter-sm"},N=(0,n.aZ)({setup(e){const l=(0,i.Z)(),t=(0,o.iH)(),u=(0,o.iH)([]),c=(0,o.iH)(!1);function d(){s(),c.value=!0}function s(){t.value=void 0,c.value=!1}function r(e){t.value=e,c.value=!0}function m(e){s(),l.dialog({title:"Eliminar Cliente",message:"Está seguro que desea ELIMINAR al Cliente? Esto eliminará todos los datos del cliente de forma permanente",ok:"Eliminar",cancel:"No"}).onOk((()=>D(this,void 0,void 0,(function*(){try{yield a.$api["delete"](`clients/${e.id}`),yield v()}catch(l){V.j7.axiosError(l)}}))))}function p(){return D(this,void 0,void 0,(function*(){s(),yield v()}))}function v(){return D(this,void 0,void 0,(function*(){const e=yield a.$api.get("clients");u.value=e.data.data}))}return(0,n.wF)((()=>D(this,void 0,void 0,(function*(){try{yield v()}catch(e){V.j7.axiosError(e)}})))),(e,l)=>{const a=(0,n.up)("q-btn"),o=(0,n.up)("q-card-section"),i=(0,n.up)("q-card"),v=(0,n.up)("q-dialog"),f=(0,n.up)("q-page");return(0,n.wg)(),(0,n.j4)(f,{padding:""},{default:(0,n.w5)((()=>[(0,n.Wm)(i,{class:"no-box-shadow"},{default:(0,n.w5)((()=>[(0,n.Wm)(o,null,{default:(0,n.w5)((()=>[H,(0,n._)("div",$,[(0,n.Wm)(a,{color:"primary",icon:"mdi-plus",label:"Nuevo",onClick:d})])])),_:1}),(0,n.Wm)(o,null,{default:(0,n.w5)((()=>[(0,n._)("div",z,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(u.value.slice(1,u.value.length),(e=>((0,n.wg)(),(0,n.iD)("div",{class:"col-xs-12 col-sm-6 col-md-4 col-lg-3",key:`client-w-${e.id}`},[(0,n.Wm)(q,{class:"cursor-pointer",client:e,onEdit:l=>r(e),onRemove:l=>m(e)},null,8,["client","onEdit","onRemove"])])))),128))])])),_:1})])),_:1}),(0,n.Wm)(v,{modelValue:c.value,"onUpdate:modelValue":l[0]||(l[0]=e=>c.value=e)},{default:(0,n.w5)((()=>[(0,n.Wm)(U,{client:t.value,style:{width:"25rem"},onCancel:s,onCompleted:p},null,8,["client"])])),_:1},8,["modelValue"])])),_:1})}}});var P=t(9885),S=t(2074);const A=N,I=A;b()(N,"components",{QPage:P.Z,QCard:v.Z,QCardSection:f.Z,QBtn:h.Z,QDialog:S.Z})}}]);