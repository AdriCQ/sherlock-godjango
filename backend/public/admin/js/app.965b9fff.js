(()=>{"use strict";var e={7791:(e,t,n)=>{n(8964),n(702);var i=n(1957),a=n(1947),o=n(499),s=n(9835),r=n(5304);const l=(0,s.aZ)({setup(e){return(0,s.JJ)(r.cH,r.p2),(0,s.JJ)(r.VT,r.an),(0,s.JJ)(r.ju,r.Rl),(0,s.JJ)(r.TM,r.ID),(0,s.JJ)(r.HA,r.lR),(0,s.JJ)(r.Tc,r.bR),(e,t)=>{const n=(0,s.up)("router-view");return(0,s.wg)(),(0,s.j4)(n)}}}),u=l,c=u;var d=n(4072);async function m(e,t){const n=e(c);n.use(a.Z,t);const i=(0,o.Xl)("function"===typeof d.Z?await(0,d.Z)({}):d.Z);return{app:n,router:i}}var p=n(5300),f=n(5657),h=n(6229),g=n(6827);const v={config:{},iconSet:p.Z,plugins:{Dialog:f.Z,Meta:h.ZP,Notify:g.Z}},w="/admin/",_=/\/\//,y=e=>(w+e).replace(_,"/");async function b({app:e,router:t},n){let i=!1;const a=e=>{try{return y(t.resolve(e).href)}catch(n){}return Object(e)===e?null:e},o=e=>{if(i=!0,"string"===typeof e&&/^https?:\/\//.test(e))return void(window.location.href=e);const t=a(e);null!==t&&(window.location.href=t,window.location.reload())},s=window.location.href.replace(window.location.origin,"");for(let l=0;!1===i&&l<n.length;l++)try{await n[l]({app:e,router:t,ssrContext:null,redirect:o,urlPath:s,publicPath:w})}catch(r){return r&&r.url?void o(r.url):void console.error("[Quasar] boot error:",r)}!0!==i&&(e.use(t),e.mount("#q-app"))}m(i.ri,v).then((e=>Promise.all([Promise.resolve().then(n.bind(n,7256)),Promise.resolve().then(n.bind(n,4379))]).then((t=>{const n=t.map((e=>e.default)).filter((e=>"function"===typeof e));b(e,n)}))))},7256:(e,t,n)=>{n.r(t),n.d(t,{$api:()=>c,$csrf:()=>m,baseURL:()=>u,default:()=>d});var i=n(3340),a=n(9981),o=n.n(a),s=n(5304);function r(e){const t=e.length+1;return document.cookie&&document.cookie.split(";").map((e=>e.trim())).filter((n=>n.substring(0,t)===`${e}=`)).map((e=>decodeURIComponent(e.substring(t))))[0],null}var l=function(e,t,n,i){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function s(e){try{l(i.next(e))}catch(t){o(t)}}function r(e){try{l(i["throw"](e))}catch(t){o(t)}}function l(e){e.done?n(e.value):a(e.value).then(s,r)}l((i=i.apply(e,t||[])).next())}))};let u="";u="https://godjango.servimav.com";const c=o().create({baseURL:`${u}/api`,timeout:3e4,timeoutErrorMessage:"Error en la red"}),d=(0,i.xr)((({app:e})=>{s.bR.load(),c.interceptors.request.use((e=>{if(e.headers["Content-Type"]||(e.headers["Content-Type"]="application/json"),!e.headers["Authorization"]){const t=s.bR.api_token;t&&t.length>0?e.headers.Authorization="Bearer "+t:e.headers.Authorization="Bearer ApiToken"}return e})),e.config.globalProperties.$axios=o(),e.config.globalProperties.$api=c})),m=()=>l(void 0,void 0,void 0,(function*(){if(!r("XSRF-TOKEN"))return console.log("XSRF-TOKEN")}))},4379:(e,t,n)=>{n.r(t),n.d(t,{$router:()=>a,default:()=>o});var i=n(3340);let a;const o=(0,i.xr)((({router:e})=>{a=e}))},33:(e,t,n)=>{n.d(t,{fz:()=>_,he:()=>y,j7:()=>g,GZ:()=>w});var i=n(4587),a=n(3529),o=n(9360),s=n(7634),r=n(5304),l=function(e,t,n,i){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function s(e){try{l(i.next(e))}catch(t){o(t)}}function r(e){try{l(i["throw"](e))}catch(t){o(t)}}function l(e){e.done?n(e.value):a(e.value).then(s,r)}l((i=i.apply(e,t||[])).next())}))};const u=(0,s.fo)("BackgroundGeolocation");class c{Geolocation_currentPosition(){return l(this,void 0,void 0,(function*(){yield a.b.requestPermissions();const{coords:e}=yield a.b.getCurrentPosition({enableHighAccuracy:!0,maximumAge:8e3,timeout:8e3});return(0,i.latLng)(e.latitude,e.longitude)}))}Geolocation_watchPosition(){return l(this,void 0,void 0,(function*(){u.addWatcher({backgroundMessage:"Cancel to prevent battery drain.",backgroundTitle:"Tracking You.",requestPermissions:!0,stale:!1,distanceFilter:100},((e,t)=>l(this,void 0,void 0,(function*(){return t?("NOT_AUTHORIZED"===t.code&&window.confirm("This app needs your location, but does not have permission.\n\nOpen settings now?")&&u.openSettings(),console.error(t)):(r.p2.agent&&e&&(r.lR.gpsPosition=(0,i.latLng)(e.latitude,e.longitude),yield r.p2.update(r.p2.agent.id,{position:(0,i.latLng)(e.latitude,e.longitude)})),e)})))).then((e=>{r.lR.watcherId&&r.lR.watcherId!==e&&u.removeWatcher({id:r.lR.watcherId}),r.lR.watcherId=e}))}))}Storage_load(e){return l(this,void 0,void 0,(function*(){const t=(yield o.u.keys()).keys;if(!t.includes(e))return null;const n=yield o.u.get({key:e});return n.value?JSON.parse(n.value):null}))}Storage_save(e,t){return l(this,void 0,void 0,(function*(){return yield o.u.set({key:e,value:JSON.stringify(t)})}))}}var d=n(6827),m=n(261),p=n(4379),f=n(4072);class h{axiosError(e,t="No se pudo guardar"){console.log({AxiosError:e});const n=e;if(n.response){if(401===n.response.status)return r.bR.logout(),p.$router.push({name:f.I.LOGIN}),void this.error(["No podemos verificar sus credenciales"]);n.response.status>=400&&n.response.data.message?this.error([n.response.data.message]):this.error([t])}else this.error([t])}success(e,t=4e3,n="center"){e.forEach((e=>{d.Z.create({type:"positive",message:e,position:n,timeout:t,actions:[{label:"x",color:"white",handler:()=>{}}]})}))}error(e,t=4e3,n="center"){e.forEach((e=>{d.Z.create({type:"negative",message:e,position:n,timeout:t,actions:[{label:"x",color:"white",handler:()=>{}}]})}))}loading(e=!0,t="",n=0,i="center"){e?this._loading=d.Z.create({spinner:m.Z,position:i,message:t,timeout:n}):this._loading&&this._loading()}}const g=new h;n(5255);var v=n(5657);function w(){function e(e){v.Z.create({title:e.title,message:e.message,ok:!0,cancel:!0}).onOk((()=>{e.onOk()}))}function t(e,t="Ha ocurrido un error"){console.log({_error:e}),e&&e.response&&e.response.data?401===e.response.status?(d.Z.create({type:"negative",icon:"mdi-alert-circle-outline",message:t,position:"center",actions:[{icon:"mdi-close",color:"white",handler:()=>{}}]}),r.bR.logout(),p.$router&&p.$router.push({name:f.I.LOGIN})):d.Z.create({type:"negative",icon:"mdi-alert-circle-outline",message:t,position:"center",actions:[{icon:"mdi-close",color:"white",handler:()=>{}}]}):d.Z.create({type:"negative",icon:"mdi-alert-circle-outline",message:t,position:"center"})}return{errorHandler:t,deleteDialog:e}}const _=new c,y=(0,i.latLng)(0,0)},5304:(e,t,n)=>{n.d(t,{p2:()=>g,Rl:()=>_,an:()=>S,ID:()=>T,lR:()=>G,bR:()=>c,cH:()=>v,ju:()=>y,VT:()=>k,TM:()=>x,HA:()=>Z,Tc:()=>d,Ey:()=>O});var i=n(9835),a=n(3703),o=n(7256),s=n(499),r=function(e,t,n,i){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function s(e){try{l(i.next(e))}catch(t){o(t)}}function r(e){try{l(i["throw"](e))}catch(t){o(t)}}function l(e){e.done?n(e.value):a(e.value).then(s,r)}l((i=i.apply(e,t||[])).next())}))};const l="godjango-sherlock/UserInjectable";class u{constructor(){this._allUsers=(0,s.iH)([]),this._api_token=(0,s.iH)(null),this._profile=(0,s.iH)({email:"",id:0,name:"",phone:"",role:{id:2,display_name:"User",name:"user"}}),this._roles=(0,s.iH)([])}get allUsers(){return this._allUsers.value}set allUsers(e){this._allUsers.value=e}get api_token(){return this._api_token.value}set api_token(e){this._api_token.value=e}get profile(){return this._profile.value}set profile(e){this._profile.value=e}get roles(){return this._roles.value}set roles(e){this._roles.value=e}create(e){return r(this,void 0,void 0,(function*(){yield(0,o.$csrf)();const t=yield o.$api.post("users",e);return this.allUsers.push(t.data.data),t.data.data}))}list(){return r(this,void 0,void 0,(function*(){return this.allUsers=(yield o.$api.get("users/list")).data.data,this.allUsers}))}listRoles(){return r(this,void 0,void 0,(function*(){this.roles=(yield o.$api.get("users/roles")).data.data}))}login(e){return r(this,void 0,void 0,(function*(){yield(0,o.$csrf)();const t=yield o.$api.post("users/login",e);return this.api_token=t.data.data.api_token,this.profile=t.data.data.profile,this.save(),t.data}))}remove(e){return r(this,void 0,void 0,(function*(){yield(0,o.$csrf)();const t=yield o.$api["delete"](`users/${e}`),n=this.allUsers.findIndex((t=>t.id==e));return n>=0&&this.allUsers.splice(n,1),t.data.data}))}update(e,t){return r(this,void 0,void 0,(function*(){yield(0,o.$csrf)();const n=yield o.$api.patch(`users/${e}`,t),i=this.allUsers.findIndex((t=>t.id==e));return i>=0&&(this.allUsers[i]=n.data.data),n.data.data}))}updateEmail(e,t){return r(this,void 0,void 0,(function*(){yield(0,o.$csrf)();const n=yield o.$api.patch(`users/${e}/email`,{email:t}),i=this.allUsers.findIndex((t=>t.id==e));return i>=0&&(this.allUsers[i]=n.data.data),n.data.data}))}load(){var e;if(a.Z.has(l)){const t=null===(e=a.Z.getItem(l))||void 0===e?void 0:e.toString();if(t){const e=JSON.parse(t);this.profile=e.profile,this.api_token=e.api_token}}}logout(){this.api_token=null,this.profile={email:"",id:0,name:"",phone:"",role:{id:2,display_name:"User",name:"user"}},this.save()}save(){a.Z.set(l,JSON.stringify({profile:this.profile,api_token:this.api_token}))}}const c=new u,d=Symbol("UserInjectable");var m=function(e,t,n,i){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function s(e){try{l(i.next(e))}catch(t){o(t)}}function r(e){try{l(i["throw"](e))}catch(t){o(t)}}function l(e){e.done?n(e.value):a(e.value).then(s,r)}l((i=i.apply(e,t||[])).next())}))};const p="agents",f="storage/agents";class h{constructor(){this._agent=(0,s.iH)(),this._agents=(0,s.iH)([]),this._assignments=(0,s.iH)([]),this._categories=(0,s.iH)([]),this._groups=(0,s.iH)([])}get agent(){return c.profile&&"user"===c.profile.role.name?this._agent.value:void 0}set agent(e){c.profile&&"user"===c.profile.role.name?this._agent.value=e:this._agent.value=void 0}get agents(){return this._agents.value}set agents(e){this._agents.value=e}get assignments(){return this._assignments.value}set assignments(e){this._assignments.value=e}get availableAgents(){return this.agents.filter((e=>!1===Boolean(e.bussy)))}get categories(){return this._categories.value}set categories(e){this._categories.value=e}get groups(){return this._groups.value}set groups(e){this._groups.value=e}create(e){return m(this,void 0,void 0,(function*(){yield(0,o.$csrf)();const t=(yield o.$api.post(p,e)).data.data;return this.agents.push(t),t}))}getAssignment(e){return m(this,void 0,void 0,(function*(){const t=(yield o.$api.get(p+`assignments/${e}`)).data.data,n=this.assignments.findIndex((t=>t.id===e));return n>=0?this.assignments[n]=t:this.assignments.push(t),t}))}getAssignmentByCheckpoint(e){return m(this,void 0,void 0,(function*(){const t=(yield o.$api.get(p+`/assignments/checkpoints/${e}`)).data.data,n=this.assignments.findIndex((e=>e.id===t.id));return n>=0?this.assignments[n]=t:this.assignments.push(t),t}))}list(){return m(this,void 0,void 0,(function*(){return this.agents=(yield o.$api.get(p)).data.data,this.agents}))}listAssignments(e=0){return m(this,void 0,void 0,(function*(){const t=yield o.$api.get(p+"/assignments",{params:{status:e}});return this.assignments=t.data.data?t.data.data:[],this.assignments}))}remove(e){return m(this,void 0,void 0,(function*(){yield(0,o.$csrf)(),yield o.$api["delete"](`${p}/${e}`);const t=this.agents.findIndex((t=>t.id===e));t>=0&&this.agents.splice(t,1)}))}updateAssignmentCheckpoint(e,t){return m(this,void 0,void 0,(function*(){yield(0,o.$csrf)();const n=(yield o.$api.patch(`assignments/checkpoints/${e}`,t)).data.data;let i,a=-1;return this.assignments.forEach(((e,t)=>{var o;a=t,i=null===(o=e.checkpoints)||void 0===o?void 0:o.findIndex((e=>e.id===n.id))})),i&&(this.assignments[a].checkpoints[i]=n),n}))}whoami(){return m(this,void 0,void 0,(function*(){return this.agent=(yield o.$api.get(`${p}/whoami`)).data.data,this.save(),this.agent}))}search(e){return m(this,void 0,void 0,(function*(){return o.$api.get(`${p}/search`,{params:e})}))}update(e,t){return m(this,void 0,void 0,(function*(){yield(0,o.$csrf)();const n=(yield o.$api.patch(`${p}/${e}`,t)).data.data,i=this.agents.findIndex((t=>t.id===e));return i>=0&&(this.agents[i]=n),n}))}addAgentToGroup(e,t){return m(this,void 0,void 0,(function*(){yield(0,o.$csrf)();const n=(yield o.$api.post(`${p}/groups/${t}/add-agent`,{agent_id:e})).data.data,i=this.groups.findIndex((e=>e.id===t));return i>=0&&(this.groups[i]=n),n}))}createGroup(e){return m(this,void 0,void 0,(function*(){yield(0,o.$csrf)();const t=(yield o.$api.post(`${p}/groups`,e)).data.data;return this.groups.push(t),t}))}listGroup(){return m(this,void 0,void 0,(function*(){return this.groups=(yield o.$api.get(`${p}/groups`)).data.data,this.agents}))}removeGroup(e){return m(this,void 0,void 0,(function*(){yield(0,o.$csrf)(),yield o.$api["delete"](`${p}/groups/${e}`);const t=this.groups.findIndex((t=>t.id===e));t>=0&&this.groups.splice(t,1)}))}removeAgentFromGroup(e,t){return m(this,void 0,void 0,(function*(){yield(0,o.$csrf)();const n=(yield o.$api.post(`${p}/groups/${t}/remove-agent`,{agent_id:e})).data.data,i=this.groups.findIndex((e=>e.id===t));return i>=0&&(this.groups[i]=n),n}))}updateGroup(e,t){return m(this,void 0,void 0,(function*(){yield(0,o.$csrf)();const n=(yield o.$api.patch(`${p}/groups/${e}`,t)).data.data,i=this.groups.findIndex((t=>t.id===e));return i>=0&&(this.groups[i]=n),n}))}findCheckpointById(e){let t;return this.assignments.forEach((n=>{var i;t=null===(i=n.checkpoints)||void 0===i?void 0:i.find((t=>t.id===e))})),t}load(){var e;if(a.Z.has(f)){const t=null===(e=a.Z.getItem(f))||void 0===e?void 0:e.toString();if(t){const e=JSON.parse(t);this.agent=e}}}save(){a.Z.set(f,JSON.stringify(this.agent))}}const g=new h,v=Symbol("AgentInjectable");class w{constructor(){this._leftDrawer=(0,s.iH)(!1)}get leftDrawer(){return this._leftDrawer.value}set leftDrawer(e){this._leftDrawer.value=e}get mode(){return c.profile&&c.profile.role?c.profile.role.name:"user"}toggleLeftDrawer(){this._leftDrawer.value=!this._leftDrawer.value}}const _=new w,y=Symbol("App");var b=function(e,t,n,i){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function s(e){try{l(i.next(e))}catch(t){o(t)}}function r(e){try{l(i["throw"](e))}catch(t){o(t)}}function l(e){e.done?n(e.value):a(e.value).then(s,r)}l((i=i.apply(e,t||[])).next())}))};class E{constructor(){this._assignments=(0,s.iH)([])}get assignments(){return this._assignments.value}set assignments(e){this._assignments.value=e}getById(e){const t=this.assignments.findIndex((t=>t.id===e));if(t>=0)return this.assignments[t]}create(e){return b(this,void 0,void 0,(function*(){const t=(yield o.$api.post("assignments",e)).data.data;return this.assignments.push(t),t}))}list(){return b(this,void 0,void 0,(function*(){return(yield o.$api.get("assignments")).data.data}))}filter(e){return b(this,void 0,void 0,(function*(){return this.assignments=(yield o.$api.post("assignments/search",e)).data.data,this.assignments}))}update(e,t){return b(this,void 0,void 0,(function*(){const n=(yield o.$api.patch(`assignments/${e}`,t)).data.data;return this.findByIdAndUpdate(e,n),n}))}addCheckpoint(e,t){return b(this,void 0,void 0,(function*(){const n=(yield o.$api.post(`assignments/${e}/assign-checkpoint`,t)).data.data;return this.findByIdAndUpdate(e,n)}))}removeCheckpoint(e,t){var n,i;return b(this,void 0,void 0,(function*(){yield o.$api["delete"](`assignments/checkpoints/${t}`);const a=this.assignments.findIndex((t=>t.id===e));if(a>=0){const e=null===(n=this.assignments[a].checkpoints)||void 0===n?void 0:n.findIndex((e=>e.id===t));console.log(e),void 0!==e&&e>=0&&(null===(i=this.assignments[a].checkpoints)||void 0===i||i.splice(e,1))}}))}findByIdAndUpdate(e,t){const n=this.assignments.findIndex((t=>t.id===e));return n>=0&&(this.assignments[n]=t),this.assignments}findByIdAndRemove(e){const t=this.assignments.findIndex((t=>t.id===e));return t>=0&&this.assignments.splice(e,1),this.assignments}}const S=new E,k=Symbol("AssignmetnInjectable");var N=function(e,t,n,i){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function s(e){try{l(i.next(e))}catch(t){o(t)}}function r(e){try{l(i["throw"](e))}catch(t){o(t)}}function l(e){e.done?n(e.value):a(e.value).then(s,r)}l((i=i.apply(e,t||[])).next())}))};const A="events";class I{constructor(){this._events=(0,s.iH)([])}get events(){return this._events.value}set events(e){this._events.value=e}create(e){return N(this,void 0,void 0,(function*(){yield(0,o.$csrf)();const t=yield o.$api.post(A,e);return this.events.unshift(t.data.data),t.data.data}))}find(e){return N(this,void 0,void 0,(function*(){return yield(0,o.$csrf)(),o.$api.get(`${A}/${e}`)}))}list(){return N(this,void 0,void 0,(function*(){return o.$api.get(A)}))}listCompleted(){return N(this,void 0,void 0,(function*(){return(yield this.search("completed")).data.data}))}listOnProgress(){return N(this,void 0,void 0,(function*(){return this.events=(yield this.search("onprogress")).data.data,this.events}))}mine(){return N(this,void 0,void 0,(function*(){return this.events=(yield o.$api.get(A+"/mine")).data.data,this.events}))}remove(e){return N(this,void 0,void 0,(function*(){return yield(0,o.$csrf)(),o.$api["delete"](`${A}/${e}`)}))}search(e){return N(this,void 0,void 0,(function*(){return yield(0,o.$csrf)(),o.$api.post(`${A}/search`,{status:e})}))}update(e,t){return N(this,void 0,void 0,(function*(){yield(0,o.$csrf)();const n=yield o.$api.patch(`${A}/${e}`,t),i=this.events.findIndex((e=>e.id===n.data.data.id));return i>=0&&(this.events[i]=n.data.data),n.data.data}))}}const T=new I,x=Symbol("EventInjectable");var W=n(5657),U=n(7506),P=n(33),$=function(e,t,n,i){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function s(e){try{l(i.next(e))}catch(t){o(t)}}function r(e){try{l(i["throw"](e))}catch(t){o(t)}}function l(e){e.done?n(e.value):a(e.value).then(s,r)}l((i=i.apply(e,t||[])).next())}))};class M{constructor(){this._center=(0,s.iH)(P.he),this._gpsPosition=(0,s.iH)(void 0),this._markers=(0,s.iH)([]),this._settings=(0,s.iH)({multiple:!1,zoom:{max:18,min:8}}),this._zoom=(0,s.iH)(10),this._watcherId=(0,s.iH)()}get center(){return this._center.value}set center(e){this._center.value=e}get gpsPosition(){return this._gpsPosition.value}set gpsPosition(e){this._gpsPosition.value=e}get markers(){return this._markers.value}set markers(e){this._markers.value=e}get settings(){return this._settings.value}set settings(e){this._settings.value=e}get watcherId(){return this._watcherId.value}set watcherId(e){this._watcherId.value=e}get zoom(){return this._zoom.value}set zoom(e){this._zoom.value=e}getGpsPosition(){return $(this,void 0,void 0,(function*(){if(U.ZP.is.mobile)try{const e=yield P.fz.Geolocation_currentPosition();this.gpsPosition=e,g.agent&&(yield g.update(g.agent.id,{position:this.gpsPosition}))}catch(e){W.Z.create({title:"Activación de GPS",message:"Para continuar active su conexión de GPS",ok:"Ya tengo GPS activo",persistent:!0}).onOk((()=>$(this,void 0,void 0,(function*(){yield this.getGpsPosition()}))))}}))}markGpsPosition(){return $(this,void 0,void 0,(function*(){this.gpsPosition&&(this.markers=[],this.markers.push(this.gpsPosition),this.center=this.gpsPosition,this.zoom=16),yield this.getGpsPosition()}))}watchGpsPosition(){return $(this,void 0,void 0,(function*(){U.ZP.is.mobile&&(yield P.fz.Geolocation_watchPosition())}))}}const G=new M,Z=Symbol("MapInjectable");function O(e,t){const n=(0,i.f3)(e,t);if(!n)throw new Error(`Could not resolve ${e.toString()}`);return n}},4072:(e,t,n)=>{n.d(t,{I:()=>i,Z:()=>He});var i,a=n(3340),o=n(8910),s=n(9141);(function(e){e["ADMIN_HOME"]="ADMIN.HOME",e["ADMIN_USERS"]="ADMIN.USERS",e["ADMIN_AGENTS"]="ADMIN.AGENTS",e["ADMIN_AGENT_GROUP"]="ADMIN.AGENT.GROUP",e["ADMIN_AGENTS_MAP"]="ADMIN.AGENT.MAP",e["ADMIN_ASSIGNMENT"]="ADMIN.ASSIGNMENT",e["ADMIN_ASSIGNMENTS"]="ADMIN.ASSIGNMENTS",e["ADMIN_EVENTS"]="ADMIN.EVENTS",e["ADMIN_CLIENTS"]="ADMIN.CLIENTS",e["AGENT_ASSIGNMENT"]="AGENT.ASSIGNMENT",e["AGENT_ASSIGNMENTS"]="AGENT.ASSIGNMENTS",e["AGENT_CHECKPOINT"]="AGENT.CHECKPOINT",e["AGENT_HOME"]="AGENT.HOME",e["AGENT_REPORTS"]="AGENT.REPORTS",e["AGENT_PROFILE"]="AGENT.PROFILE",e["LOGIN"]="AUTH.LOGIN"})(i||(i={}));const r={path:"/auth",component:s["default"],name:i.LOGIN},l=r;var u=n(9835),c=n(499),d=n(6970),m=n(5304),p=n(9302);const f=(0,u.aZ)({setup(e){const t=(0,m.Ey)(m.ju),n=(0,m.Ey)(m.VT),a=(0,m.Ey)(m.TM),s=(0,p.Z)(),r=(0,o.yj)(),l=(0,o.tv)(),f=(0,u.Fl)((()=>n.assignments.length)),h=(0,u.Fl)((()=>a.events.length)),g=(0,u.Fl)((()=>r.name===i.ADMIN_CLIENTS)),v=(0,u.Fl)((()=>"manager"===t.mode?"Sherlock Manager":"Sherlock Agente"));function w(){"admin"===t.mode?(m.bR.logout(),l.push({name:i.LOGIN})):t.toggleLeftDrawer()}return(e,n)=>{const a=(0,u.up)("q-btn"),o=(0,u.up)("q-toolbar-title"),r=(0,u.up)("q-badge"),l=(0,u.up)("q-toolbar"),m=(0,u.up)("q-header");return(0,u.wg)(),(0,u.j4)(m,{elevated:"",class:"bg-primary","height-hint":"98"},{default:(0,u.w5)((()=>[(0,u.Wm)(l,null,{default:(0,u.w5)((()=>[(0,u.Wm)(a,{dense:"",flat:"",round:"",icon:"admin"===(0,c.SU)(t).mode?"mdi-logout":"mdi-menu",onClick:w},null,8,["icon"]),(0,u.Wm)(o,null,{default:(0,u.w5)((()=>[(0,u.Uk)((0,d.zw)((0,c.SU)(v)),1)])),_:1}),(0,c.SU)(s).platform.is.mobile||(0,c.SU)(g)?(0,u.kq)("",!0):((0,u.wg)(),(0,u.iD)(u.HY,{key:0},[(0,u.Wm)(a,{flat:"",round:"",dense:"",icon:"mdi-format-list-checks",to:{name:(0,c.SU)(i).ADMIN_HOME}},{default:(0,u.w5)((()=>[(0,c.SU)(f)>0?((0,u.wg)(),(0,u.j4)(r,{key:0,color:"warning","text-color":"dark",floating:""},{default:(0,u.w5)((()=>[(0,u.Uk)((0,d.zw)((0,c.SU)(f)),1)])),_:1})):(0,u.kq)("",!0)])),_:1},8,["to"]),(0,u.Wm)(a,{flat:"",round:"",dense:"",icon:"mdi-bell-outline",to:{name:(0,c.SU)(i).ADMIN_EVENTS}},{default:(0,u.w5)((()=>[(0,c.SU)(h)>0?((0,u.wg)(),(0,u.j4)(r,{key:0,color:"warning","text-color":"dark",floating:""},{default:(0,u.w5)((()=>[(0,u.Uk)((0,d.zw)((0,c.SU)(h)),1)])),_:1})):(0,u.kq)("",!0)])),_:1},8,["to"])],64))])),_:1})])),_:1})}}});var h=n(6602),g=n(1663),v=n(4455),w=n(1973),_=n(990),y=n(9984),b=n.n(y);const E=f,S=E;b()(f,"components",{QHeader:h.Z,QToolbar:g.Z,QBtn:v.Z,QToolbarTitle:w.Z,QBadge:_.Z});const k=(0,u.aZ)({setup(e){const t=(0,m.Ey)(m.ju),n=(0,m.Ey)(m.VT),a=(0,m.Ey)(m.TM),o=(0,u.Fl)((()=>n.assignments.length)),s=(0,u.Fl)((()=>a.events.length));return(e,n)=>{const a=(0,u.up)("q-icon"),r=(0,u.up)("q-badge"),l=(0,u.up)("q-route-tab"),m=(0,u.up)("q-tab"),p=(0,u.up)("q-tabs"),f=(0,u.up)("q-footer");return(0,u.wg)(),(0,u.j4)(f,{elevated:"",class:"bg-primary"},{default:(0,u.w5)((()=>[(0,u.Wm)(p,{align:"justify","indicator-color":"transparent","active-color":"secondary",id:"tab-buttons","no-caps":""},{default:(0,u.w5)((()=>[(0,u.Wm)(l,{exact:"",to:{name:(0,c.SU)(i).ADMIN_HOME}},{default:(0,u.w5)((()=>[(0,u.Wm)(a,{name:"mdi-format-list-checks",size:"1.6rem"}),(0,c.SU)(o)>0?((0,u.wg)(),(0,u.j4)(r,{key:0,color:"warning","text-color":"dark",floating:""},{default:(0,u.w5)((()=>[(0,u.Uk)((0,d.zw)((0,c.SU)(o)),1)])),_:1})):(0,u.kq)("",!0)])),_:1},8,["to"]),(0,u.Wm)(l,{exact:"",to:{name:(0,c.SU)(i).ADMIN_EVENTS}},{default:(0,u.w5)((()=>[(0,u.Wm)(a,{name:"mdi-bell-outline",size:"1.6rem"}),(0,c.SU)(s)>0?((0,u.wg)(),(0,u.j4)(r,{key:0,color:"warning","text-color":"dark",floating:""},{default:(0,u.w5)((()=>[(0,u.Uk)((0,d.zw)((0,c.SU)(s)),1)])),_:1})):(0,u.kq)("",!0)])),_:1},8,["to"]),(0,u.Wm)(l,{exact:"",to:{name:(0,c.SU)(i).ADMIN_AGENTS_MAP}},{default:(0,u.w5)((()=>[(0,u.Wm)(a,{name:"mdi-account-group",size:"1.6rem"})])),_:1},8,["to"]),(0,u.Wm)(m,null,{default:(0,u.w5)((()=>[(0,u.Wm)(a,{size:"1.6rem",name:"mdi-apps",onClick:n[0]||(n[0]=e=>(0,c.SU)(t).toggleLeftDrawer())})])),_:1})])),_:1})])),_:1})}}});var N=n(1378),A=n(7817),I=n(3333),T=n(2857),x=n(7661);const W=k,U=W;b()(k,"components",{QFooter:N.Z,QTabs:A.Z,QRouteTab:I.Z,QIcon:T.Z,QBadge:_.Z,QTab:x.Z});var P=n(33);const $={class:"text-center q-mt-md"},M={class:"text-grey-9 text-body1"},G={class:"q-gutter-sm q-mt-md"},Z=(0,u.Uk)("Inicio"),O=(0,u.Uk)("Asignaciones"),D=(0,u.Uk)("Personal"),q=(0,u.Uk)("Usuarios"),j=(0,u.Uk)("Agentes"),R=(0,u.Uk)("Grupos"),H=(0,u.Uk)("Distribución"),C=(0,u.Uk)("Eventos"),Q=(0,u.Uk)("Salir"),z=(0,u.aZ)({setup(e){const t=(0,m.Ey)(m.ju),n=(0,P.GZ)(),a=(0,o.tv)(),s=(0,m.Ey)(m.Tc),r=(0,c.Fl)((()=>s.profile.name)),l=(0,c.Fl)((()=>t.leftDrawer));function p(){n.deleteDialog({title:"Salir",message:"¿Está seguro que desea salir?",onOk:()=>{s.logout(),a.push({name:i.LOGIN})}})}function f(e){t.leftDrawer=e}return(e,t)=>{const n=(0,u.up)("q-avatar"),a=(0,u.up)("q-item-section"),o=(0,u.up)("q-item-label"),s=(0,u.up)("q-item"),m=(0,u.up)("q-expansion-item"),h=(0,u.up)("q-list"),g=(0,u.up)("q-drawer");return(0,u.wg)(),(0,u.j4)(g,{"model-value":(0,c.SU)(l),"onUpdate:modelValue":f,"show-if-above":"",side:"left",width:280},{default:(0,u.w5)((()=>[(0,u._)("div",$,[(0,u._)("div",M,"Hola, "+(0,d.zw)((0,c.SU)(r)),1)]),(0,u._)("div",G,[(0,u.Wm)(h,{class:"rounded-borders",style:{"max-width":"350px"}},{default:(0,u.w5)((()=>[(0,u.Wm)(s,{clickable:"",exact:"",to:{name:(0,c.SU)(i).ADMIN_HOME}},{default:(0,u.w5)((()=>[(0,u.Wm)(a,{avatar:"",top:""},{default:(0,u.w5)((()=>[(0,u.Wm)(n,{size:"md",icon:"mdi-home"})])),_:1}),(0,u.Wm)(a,{class:"text-grey-9"},{default:(0,u.w5)((()=>[(0,u.Wm)(o,{lines:"1"},{default:(0,u.w5)((()=>[Z])),_:1})])),_:1})])),_:1},8,["to"]),(0,u.Wm)(s,{clickable:"",exact:"",to:{name:(0,c.SU)(i).ADMIN_ASSIGNMENTS}},{default:(0,u.w5)((()=>[(0,u.Wm)(a,{avatar:"",top:""},{default:(0,u.w5)((()=>[(0,u.Wm)(n,{size:"md",icon:"mdi-format-list-checks"})])),_:1}),(0,u.Wm)(a,{class:"text-grey-9"},{default:(0,u.w5)((()=>[(0,u.Wm)(o,{lines:"1"},{default:(0,u.w5)((()=>[O])),_:1})])),_:1})])),_:1},8,["to"]),(0,u.Wm)(m,{"content-inset-level":.25},{header:(0,u.w5)((()=>[(0,u.Wm)(a,{avatar:"",top:""},{default:(0,u.w5)((()=>[(0,u.Wm)(n,{size:"md",icon:"mdi-account-group","text-color":"primary"})])),_:1}),(0,u.Wm)(a,null,{default:(0,u.w5)((()=>[(0,u.Wm)(o,{lines:"1"},{default:(0,u.w5)((()=>[D])),_:1})])),_:1})])),default:(0,u.w5)((()=>[(0,u.Wm)(m,{"expand-icon-class":"text-transparent","expand-separator":!1,exact:"",to:{name:(0,c.SU)(i).ADMIN_USERS}},{header:(0,u.w5)((()=>[(0,u.Wm)(a,{avatar:"",top:""},{default:(0,u.w5)((()=>[(0,u.Wm)(n,{size:"md",icon:"mdi-account-box-outline","text-color":"primary"})])),_:1}),(0,u.Wm)(a,null,{default:(0,u.w5)((()=>[(0,u.Wm)(o,{lines:"1"},{default:(0,u.w5)((()=>[q])),_:1})])),_:1})])),_:1},8,["to"]),(0,u.Wm)(m,{"expand-icon-class":"text-transparent","expand-separator":!1,exact:"",to:{name:(0,c.SU)(i).ADMIN_AGENTS}},{header:(0,u.w5)((()=>[(0,u.Wm)(a,{avatar:"",top:""},{default:(0,u.w5)((()=>[(0,u.Wm)(n,{size:"md",icon:"mdi-account","text-color":"primary"})])),_:1}),(0,u.Wm)(a,null,{default:(0,u.w5)((()=>[(0,u.Wm)(o,{lines:"1"},{default:(0,u.w5)((()=>[j])),_:1})])),_:1})])),_:1},8,["to"]),(0,u.Wm)(m,{"expand-icon-class":"text-transparent","expand-separator":!1,exact:"",to:{name:(0,c.SU)(i).ADMIN_AGENT_GROUP}},{header:(0,u.w5)((()=>[(0,u.Wm)(a,{avatar:"",top:""},{default:(0,u.w5)((()=>[(0,u.Wm)(n,{size:"md",icon:"mdi-account-circle","text-color":"primary"})])),_:1}),(0,u.Wm)(a,null,{default:(0,u.w5)((()=>[(0,u.Wm)(o,{lines:"1"},{default:(0,u.w5)((()=>[R])),_:1})])),_:1})])),_:1},8,["to"]),(0,u.Wm)(m,{"expand-icon-class":"text-transparent","expand-separator":!1,exact:"",to:{name:(0,c.SU)(i).ADMIN_AGENTS_MAP}},{header:(0,u.w5)((()=>[(0,u.Wm)(a,{avatar:"",top:""},{default:(0,u.w5)((()=>[(0,u.Wm)(n,{size:"md",icon:"mdi-map-marker","text-color":"primary"})])),_:1}),(0,u.Wm)(a,null,{default:(0,u.w5)((()=>[(0,u.Wm)(o,{lines:"1"},{default:(0,u.w5)((()=>[H])),_:1})])),_:1})])),_:1},8,["to"])])),_:1},8,["content-inset-level"]),(0,u.Wm)(s,{clickable:"",exact:"",to:{name:(0,c.SU)(i).ADMIN_EVENTS}},{default:(0,u.w5)((()=>[(0,u.Wm)(a,{avatar:"",top:""},{default:(0,u.w5)((()=>[(0,u.Wm)(n,{size:"md",icon:"mdi-bell-outline"})])),_:1}),(0,u.Wm)(a,{class:"text-grey-9"},{default:(0,u.w5)((()=>[(0,u.Wm)(o,{lines:"1"},{default:(0,u.w5)((()=>[C])),_:1})])),_:1})])),_:1},8,["to"]),(0,u.Wm)(s,{clickable:"",onClick:p},{default:(0,u.w5)((()=>[(0,u.Wm)(a,{avatar:"",top:""},{default:(0,u.w5)((()=>[(0,u.Wm)(n,{size:"md",icon:"mdi-exit-to-app"})])),_:1}),(0,u.Wm)(a,{class:"text-grey-9"},{default:(0,u.w5)((()=>[(0,u.Wm)(o,{lines:"1"},{default:(0,u.w5)((()=>[Q])),_:1})])),_:1})])),_:1})])),_:1})])])),_:1},8,["model-value"])}}});var L=n(906),F=n(3246),B=n(490),J=n(1233),V=n(1357),K=n(3115),Y=n(1123);const X=z,ee=X;b()(z,"components",{QDrawer:L.Z,QList:F.Z,QItem:B.Z,QItemSection:J.Z,QAvatar:V.Z,QItemLabel:K.Z,QExpansionItem:Y.Z});var te=function(e,t,n,i){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function s(e){try{l(i.next(e))}catch(t){o(t)}}function r(e){try{l(i["throw"](e))}catch(t){o(t)}}function l(e){e.done?n(e.value):a(e.value).then(s,r)}l((i=i.apply(e,t||[])).next())}))};const ne=(0,u.aZ)({setup(e){const t=(0,m.Ey)(m.cH),n=(0,m.Ey)(m.VT),a=(0,m.Ey)(m.TM),s=(0,m.Ey)(m.Tc),r=(0,p.Z)(),l=(0,o.yj)(),d=(0,u.Fl)((()=>s.profile.role.name)),f=(0,u.Fl)((()=>l.name!==i.ADMIN_HOME&&l.name!==i.ADMIN_ASSIGNMENT&&l.name!==i.ADMIN_AGENTS_MAP)),h=(0,c.iH)();function g(e){return te(this,void 0,void 0,(function*(){Promise.all([n.filter({status:0}),s.list(),t.list(),t.listGroup(),a.listOnProgress()]).catch((e=>{P.j7.axiosError(e,"Error de conexión")})).finally((()=>{e()}))}))}return(0,u.wF)((()=>{g((()=>{console.log("Main")})),h.value=setInterval((()=>{t.list().catch((e=>{console.log("Error al listar agentes",e)}))}),2e4)})),(0,u.Jd)((()=>{clearInterval(h.value)})),(e,t)=>{const n=(0,u.up)("router-view"),i=(0,u.up)("q-pull-to-refresh"),a=(0,u.up)("q-page-container"),o=(0,u.up)("q-layout");return(0,u.wg)(),(0,u.j4)(o,{view:"lHh LpR fFf"},{default:(0,u.w5)((()=>[(0,u.Wm)(S),(0,u.Wm)(a,{class:"text-grey-9 bg-grey-4"},{default:(0,u.w5)((()=>[(0,c.SU)(f)?((0,u.wg)(),(0,u.j4)(i,{key:0,onRefresh:g},{default:(0,u.w5)((()=>[(0,u.Wm)(n)])),_:1})):((0,u.wg)(),(0,u.j4)(n,{key:1}))])),_:1}),"admin"!==(0,c.SU)(d)?((0,u.wg)(),(0,u.iD)(u.HY,{key:0},[(0,u.Wm)(ee),(0,c.SU)(r).platform.is.mobile?((0,u.wg)(),(0,u.j4)(U,{key:0})):(0,u.kq)("",!0)],64)):(0,u.kq)("",!0)])),_:1})}}});var ie=n(7605),ae=n(2133),oe=n(699);const se=ne,re=se;b()(ne,"components",{QLayout:ie.Z,QPageContainer:ae.Z,QPullToRefresh:oe.Z});const le=(e,t,n)=>{m.bR.api_token&&m.bR.profile.id&&"admin"===m.bR.profile.role.name?n():n({name:i.LOGIN})},ue=(e,t,n)=>{m.bR.api_token&&m.bR.profile.id&&"user"===m.bR.profile.role.name?(m.lR.watchGpsPosition(),n()):n({name:i.LOGIN})},ce=(e,t,n)=>{m.bR.api_token&&m.bR.profile.id?n():n({name:i.LOGIN})},de=(e,t,n)=>{m.bR.api_token&&m.bR.profile.id&&"manager"===m.bR.profile.role.name?n():n({name:i.LOGIN})},me={path:"/manager",beforeEnter:de,component:re,children:[{path:"",name:i.ADMIN_HOME,component:()=>Promise.all([n.e(736),n.e(69)]).then(n.bind(n,3069))},{path:"users",name:i.ADMIN_USERS,component:()=>Promise.all([n.e(736),n.e(855)]).then(n.bind(n,8855))},{path:"assignments",name:i.ADMIN_ASSIGNMENTS,component:()=>Promise.all([n.e(736),n.e(64),n.e(399)]).then(n.bind(n,8399))},{path:"assignments/:id",name:i.ADMIN_ASSIGNMENT,component:()=>Promise.all([n.e(736),n.e(64),n.e(723)]).then(n.bind(n,723))},{path:"agents",name:i.ADMIN_AGENTS,component:()=>Promise.all([n.e(736),n.e(996)]).then(n.bind(n,2996))},{path:"agents/groups",name:i.ADMIN_AGENT_GROUP,component:()=>Promise.all([n.e(736),n.e(199)]).then(n.bind(n,1199))},{path:"agents/map",name:i.ADMIN_AGENTS_MAP,component:()=>Promise.all([n.e(736),n.e(64),n.e(348)]).then(n.bind(n,3348))},{path:"events",name:i.ADMIN_EVENTS,component:()=>Promise.all([n.e(64),n.e(395)]).then(n.bind(n,4395))}]},pe=me,fe=(0,u.aZ)({setup(e){const t=(0,m.Ey)(m.ju);return(e,n)=>{const a=(0,u.up)("q-icon"),o=(0,u.up)("q-route-tab"),s=(0,u.up)("q-tab"),r=(0,u.up)("q-tabs"),l=(0,u.up)("q-footer");return(0,u.wg)(),(0,u.j4)(l,{elevated:"",class:"bg-primary"},{default:(0,u.w5)((()=>[(0,u.Wm)(r,{align:"justify","indicator-color":"transparent","active-color":"secondary",id:"tab-buttons","no-caps":""},{default:(0,u.w5)((()=>[(0,u.Wm)(o,{exact:"",to:{name:(0,c.SU)(i).AGENT_HOME}},{default:(0,u.w5)((()=>[(0,u.Wm)(a,{name:"mdi-checkbox-marked-circle-outline",size:"1.6rem"})])),_:1},8,["to"]),(0,u.Wm)(o,{exact:"",to:{name:(0,c.SU)(i).AGENT_ASSIGNMENTS}},{default:(0,u.w5)((()=>[(0,u.Wm)(a,{name:"mdi-format-list-checks",size:"1.6rem"})])),_:1},8,["to"]),(0,u.Wm)(o,{exact:"",to:{name:(0,c.SU)(i).AGENT_REPORTS}},{default:(0,u.w5)((()=>[(0,u.Wm)(a,{name:"mdi-bell-outline",size:"1.6rem"})])),_:1},8,["to"]),(0,u.Wm)(s,null,{default:(0,u.w5)((()=>[(0,u.Wm)(a,{size:"1.6rem",name:"mdi-apps",onClick:n[0]||(n[0]=e=>(0,c.SU)(t).toggleLeftDrawer())})])),_:1})])),_:1})])),_:1})}}}),he=fe,ge=he;b()(fe,"components",{QFooter:N.Z,QTabs:A.Z,QRouteTab:I.Z,QIcon:T.Z,QTab:x.Z});const ve=(0,u.aZ)({setup(e){const t=(0,m.Ey)(m.cH),n=(0,m.Ey)(m.ju),a=(0,p.Z)(),o=(0,u.Fl)((()=>{let e=0;return t.assignments.forEach((t=>{t.checkpoints&&(e+=t.checkpoints.length)})),e})),s=(0,u.Fl)((()=>"manager"===n.mode?"Sherlock Manager":"Sherlock Agente"));function r(){n.toggleLeftDrawer()}return(e,t)=>{const n=(0,u.up)("q-btn"),l=(0,u.up)("q-toolbar-title"),m=(0,u.up)("q-badge"),p=(0,u.up)("q-toolbar"),f=(0,u.up)("q-header");return(0,u.wg)(),(0,u.j4)(f,{elevated:"",class:"bg-primary","height-hint":"98"},{default:(0,u.w5)((()=>[(0,u.Wm)(p,null,{default:(0,u.w5)((()=>[(0,u.Wm)(n,{dense:"",flat:"",round:"",icon:"mdi-menu",onClick:r}),(0,u.Wm)(l,null,{default:(0,u.w5)((()=>[(0,u.Uk)((0,d.zw)((0,c.SU)(s)),1)])),_:1}),(0,c.SU)(a).platform.is.mobile?(0,u.kq)("",!0):((0,u.wg)(),(0,u.iD)(u.HY,{key:0},[(0,u.Wm)(n,{flat:"",round:"",dense:"",icon:"mdi-format-list-checks",to:{name:(0,c.SU)(i).AGENT_HOME}},{default:(0,u.w5)((()=>[(0,c.SU)(o)>0?((0,u.wg)(),(0,u.j4)(m,{key:0,color:"warning","text-color":"dark",floating:""},{default:(0,u.w5)((()=>[(0,u.Uk)((0,d.zw)((0,c.SU)(o)),1)])),_:1})):(0,u.kq)("",!0)])),_:1},8,["to"]),(0,u.Wm)(n,{flat:"",round:"",dense:"",icon:"mdi-bell-outline",to:{name:(0,c.SU)(i).AGENT_REPORTS}},null,8,["to"])],64))])),_:1})])),_:1})}}}),we=ve,_e=we;b()(ve,"components",{QHeader:h.Z,QToolbar:g.Z,QBtn:v.Z,QToolbarTitle:w.Z,QBadge:_.Z});var ye=function(e,t,n,i){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function s(e){try{l(i.next(e))}catch(t){o(t)}}function r(e){try{l(i["throw"](e))}catch(t){o(t)}}function l(e){e.done?n(e.value):a(e.value).then(s,r)}l((i=i.apply(e,t||[])).next())}))};const be={class:"text-center q-mt-md"},Ee={class:"text-grey-9 text-body1"},Se={class:"q-gutter-sm q-mt-md"},ke=(0,u.Uk)("Tarea Actual"),Ne=(0,u.Uk)("Mis Tareas"),Ae=(0,u.Uk)("Reportes"),Ie=(0,u.Uk)("Perfil"),Te=(0,u.Uk)("Salir"),xe=(0,u.aZ)({setup(e){const t=(0,m.Ey)(m.cH),n=(0,m.Ey)(m.ju),a=(0,P.GZ)(),s=(0,o.tv)(),r=(0,m.Ey)(m.Tc),l=(0,c.Fl)((()=>{var e;return null===(e=t.agent)||void 0===e?void 0:e.nick})),p=(0,c.Fl)((()=>t.agent)),f=(0,c.Fl)((()=>n.leftDrawer));function h(){return ye(this,void 0,void 0,(function*(){a.deleteDialog({message:"Desea modificar su estado?",title:"Cambiar estado",onOk:()=>ye(this,void 0,void 0,(function*(){if(p.value)try{const e=yield t.update(p.value.id,{bussy:!p.value.bussy});t.agent=e}catch(e){P.j7.axiosError(e)}}))})}))}function g(){a.deleteDialog({title:"Salir",message:"¿Está seguro que desea salir?",onOk:()=>{r.logout(),s.push({name:i.LOGIN})}})}function v(e){n.leftDrawer=e}return(e,t)=>{const n=(0,u.up)("q-chip"),a=(0,u.up)("q-avatar"),o=(0,u.up)("q-item-section"),s=(0,u.up)("q-item-label"),r=(0,u.up)("q-item"),m=(0,u.up)("q-list"),w=(0,u.up)("q-drawer");return(0,u.wg)(),(0,u.j4)(w,{"model-value":(0,c.SU)(f),"onUpdate:modelValue":v,"show-if-above":"",side:"left",width:280},{default:(0,u.w5)((()=>{var e,t,f;return[(0,u._)("div",be,[(0,u._)("div",Ee,"Hola, "+(0,d.zw)((0,c.SU)(l)),1),(0,u.Wm)(n,{class:"glossy",clickable:"",icon:(null===(e=(0,c.SU)(p))||void 0===e?void 0:e.bussy)?"mdi-cancel":"mdi-check",color:(null===(t=(0,c.SU)(p))||void 0===t?void 0:t.bussy)?"":"positive",label:(null===(f=(0,c.SU)(p))||void 0===f?void 0:f.bussy)?"Ocupado":"Disponible",onClick:h},null,8,["icon","color","label"])]),(0,u._)("div",Se,[(0,u.Wm)(m,{class:"rounded-borders",style:{"max-width":"350px"}},{default:(0,u.w5)((()=>[(0,u.Wm)(r,{clickable:"",exact:"",to:{name:(0,c.SU)(i).AGENT_HOME}},{default:(0,u.w5)((()=>[(0,u.Wm)(o,{avatar:"",top:""},{default:(0,u.w5)((()=>[(0,u.Wm)(a,{size:"md",icon:"mdi-checkbox-marked-circle-outline"})])),_:1}),(0,u.Wm)(o,{class:"text-grey-9"},{default:(0,u.w5)((()=>[(0,u.Wm)(s,{lines:"1"},{default:(0,u.w5)((()=>[ke])),_:1})])),_:1})])),_:1},8,["to"]),(0,u.Wm)(r,{clickable:"",exact:"",to:{name:(0,c.SU)(i).AGENT_ASSIGNMENTS}},{default:(0,u.w5)((()=>[(0,u.Wm)(o,{avatar:"",top:""},{default:(0,u.w5)((()=>[(0,u.Wm)(a,{size:"md",icon:"mdi-format-list-checks"})])),_:1}),(0,u.Wm)(o,{class:"text-grey-9"},{default:(0,u.w5)((()=>[(0,u.Wm)(s,{lines:"1"},{default:(0,u.w5)((()=>[Ne])),_:1})])),_:1})])),_:1},8,["to"]),(0,u.Wm)(r,{clickable:"",exact:"",to:{name:(0,c.SU)(i).AGENT_REPORTS}},{default:(0,u.w5)((()=>[(0,u.Wm)(o,{avatar:"",top:""},{default:(0,u.w5)((()=>[(0,u.Wm)(a,{size:"md",icon:"mdi-alert-circle-outline"})])),_:1}),(0,u.Wm)(o,{class:"text-grey-9"},{default:(0,u.w5)((()=>[(0,u.Wm)(s,{lines:"1"},{default:(0,u.w5)((()=>[Ae])),_:1})])),_:1})])),_:1},8,["to"]),(0,u.Wm)(r,{clickable:"",exact:"",to:{name:(0,c.SU)(i).AGENT_PROFILE}},{default:(0,u.w5)((()=>[(0,u.Wm)(o,{avatar:"",top:""},{default:(0,u.w5)((()=>[(0,u.Wm)(a,{size:"md",icon:"mdi-account"})])),_:1}),(0,u.Wm)(o,{class:"text-grey-9"},{default:(0,u.w5)((()=>[(0,u.Wm)(s,{lines:"1"},{default:(0,u.w5)((()=>[Ie])),_:1})])),_:1})])),_:1},8,["to"]),(0,u.Wm)(r,{clickable:"",onClick:g},{default:(0,u.w5)((()=>[(0,u.Wm)(o,{avatar:"",top:""},{default:(0,u.w5)((()=>[(0,u.Wm)(a,{size:"md",icon:"mdi-exit-to-app"})])),_:1}),(0,u.Wm)(o,{class:"text-grey-9"},{default:(0,u.w5)((()=>[(0,u.Wm)(s,{lines:"1"},{default:(0,u.w5)((()=>[Te])),_:1})])),_:1})])),_:1})])),_:1})])]})),_:1},8,["model-value"])}}});var We=n(7691);const Ue=xe,Pe=Ue;b()(xe,"components",{QDrawer:L.Z,QChip:We.Z,QList:F.Z,QItem:B.Z,QItemSection:J.Z,QAvatar:V.Z,QItemLabel:K.Z});var $e=n(5457),Me=function(e,t,n,i){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function s(e){try{l(i.next(e))}catch(t){o(t)}}function r(e){try{l(i["throw"](e))}catch(t){o(t)}}function l(e){e.done?n(e.value):a(e.value).then(s,r)}l((i=i.apply(e,t||[])).next())}))};const Ge=(0,u.aZ)({setup(e){const t=(0,m.Ey)(m.cH),n=(0,m.Ey)(m.HA),a=(0,p.Z)(),s=(0,o.yj)(),r=(0,u.Fl)((()=>t.agent)),l=(0,u.Fl)((()=>n.gpsPosition)),d=(0,u.Fl)((()=>s.name!==i.AGENT_HOME&&s.name!==i.AGENT_CHECKPOINT));function f(){setInterval((()=>Me(this,void 0,void 0,(function*(){if(r.value&&l.value){const e=yield t.update(r.value.id,{position:l.value});t.agent=e}}))),5e3)}function h(e){return Me(this,void 0,void 0,(function*(){yield g(),e()}))}function g(){return Me(this,void 0,void 0,(function*(){t.load();try{yield n.watchGpsPosition(),yield t.whoami(),t.listAssignments(),f()}catch(e){P.j7.axiosError(e)}}))}return(0,u.wF)((()=>{(0,$e.Z)({title:"Sherlock Agente"}),g()})),(e,t)=>{const n=(0,u.up)("router-view"),i=(0,u.up)("q-pull-to-refresh"),o=(0,u.up)("q-page-container"),s=(0,u.up)("q-layout");return(0,u.wg)(),(0,u.j4)(s,{view:"lHh LpR fFf"},{default:(0,u.w5)((()=>[(0,u.Wm)(_e),(0,u.Wm)(o,{class:"text-grey-9 bg-grey-4"},{default:(0,u.w5)((()=>[(0,c.SU)(d)?((0,u.wg)(),(0,u.j4)(i,{key:0,onRefresh:h},{default:(0,u.w5)((()=>[(0,u.Wm)(n)])),_:1})):((0,u.wg)(),(0,u.j4)(n,{key:1}))])),_:1}),(0,u.Wm)(Pe),(0,c.SU)(a).platform.is.mobile?((0,u.wg)(),(0,u.j4)(ge,{key:0})):(0,u.kq)("",!0)])),_:1})}}}),Ze=Ge,Oe=Ze;b()(Ge,"components",{QLayout:ie.Z,QPageContainer:ae.Z,QPullToRefresh:oe.Z});const De={path:"/agents",component:Oe,beforeEnter:ue,children:[{name:i.AGENT_HOME,path:"",component:()=>Promise.all([n.e(736),n.e(842)]).then(n.bind(n,8842))},{name:i.AGENT_ASSIGNMENTS,path:"assignments",component:()=>Promise.all([n.e(64),n.e(175)]).then(n.bind(n,5170))},{name:i.AGENT_ASSIGNMENT,path:"assignments/:id",component:()=>Promise.all([n.e(736),n.e(64),n.e(723)]).then(n.bind(n,723))},{name:i.AGENT_CHECKPOINT,path:"checkpoints/:id",component:()=>Promise.all([n.e(736),n.e(64),n.e(997)]).then(n.bind(n,3997))},{name:i.AGENT_REPORTS,path:"reports",component:()=>Promise.all([n.e(736),n.e(64),n.e(496)]).then(n.bind(n,1496))},{name:i.AGENT_PROFILE,path:"profile",component:()=>n.e(527).then(n.bind(n,2527))}]},qe=De,je=[{path:"/",beforeEnter:ce,component:()=>Promise.resolve().then(n.bind(n,9141))},l,pe,qe,{path:"/admin",component:re,beforeEnter:le,children:[{name:i.ADMIN_CLIENTS,path:"clients",component:()=>n.e(562).then(n.bind(n,6562))}]},{path:"/:catchAll(.*)*",component:()=>n.e(431).then(n.bind(n,9431))}],Re=je,He=(0,a.BC)((function(){const e=o.r5,t=(0,o.p7)({scrollBehavior:()=>({left:0,top:0}),routes:Re,history:e("/admin/")});return t}))},9141:(e,t,n)=>{n.r(t),n.d(t,{default:()=>$});var i=n(9835),a=n(1957),o=n(499),s=n(6970),r=n(33),l=n(5304),u=n(4519),c=n(6415),d=function(e,t,n,i){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function s(e){try{l(i.next(e))}catch(t){o(t)}}function r(e){try{l(i["throw"](e))}catch(t){o(t)}}function l(e){e.done?n(e.value):a(e.value).then(s,r)}l((i=i.apply(e,t||[])).next())}))};const m=e=>((0,i.dD)("data-v-1978cbaa"),e=e(),(0,i.Cn)(),e),p=m((()=>(0,i._)("div",{class:"text-body1"},"Bienvenido a Sherlock",-1))),f=(0,i.aZ)({emits:["toggle","auth"],setup(e,{emit:t}){const n=(0,l.Ey)(l.Tc),m=(0,o.iH)({email:"",password:""}),f=(0,u.ZP)({email:{required:c.BM.withMessage("El email es necesario",c.C1),email:c.BM.withMessage("El email no es válido",c.Do)},password:{required:c.BM.withMessage("La contraseña es necesaria",c.C1)}},m);function h(){var e;return d(this,void 0,void 0,(function*(){if(yield f.value.$validate()){r.j7.loading();try{yield n.login(m.value),r.j7.success([`Bienvenido ${null===(e=n.profile)||void 0===e?void 0:e.name}`]),t("auth")}catch(i){r.j7.axiosError(i,"Credenciales incorrectas")}r.j7.loading(!1)}}))}return(e,t)=>{const n=(0,i.up)("q-card-section"),r=(0,i.up)("q-input"),l=(0,i.up)("q-btn"),u=(0,i.up)("q-card-actions"),c=(0,i.up)("q-form"),d=(0,i.up)("q-card");return(0,i.wg)(),(0,i.j4)(d,{class:"login-card"},{default:(0,i.w5)((()=>[(0,i.Wm)(n,{class:"text-center text-grey-9"},{default:(0,i.w5)((()=>[p])),_:1}),(0,i.Wm)(c,{onSubmit:(0,a.iM)(h,["prevent"])},{default:(0,i.w5)((()=>[(0,i.Wm)(n,{class:"q-gutter-y-md"},{default:(0,i.w5)((()=>[(0,i.Wm)(r,{name:"email",modelValue:m.value.email,"onUpdate:modelValue":t[0]||(t[0]=e=>m.value.email=e),type:"email",label:"Email",error:(0,o.SU)(f).email.$error,"bottom-slots":""},{error:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)((0,o.SU)(f).email.$errors,(e=>((0,i.wg)(),(0,i.iD)("div",{key:e.$uid},(0,s.zw)(e.$message),1)))),128))])),_:1},8,["modelValue","error"]),(0,i.Wm)(r,{name:"password",modelValue:m.value.password,"onUpdate:modelValue":t[1]||(t[1]=e=>m.value.password=e),type:"password",label:"Contraseña",error:(0,o.SU)(f).password.$error,"bottom-slots":""},{error:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)((0,o.SU)(f).password.$errors,(e=>((0,i.wg)(),(0,i.iD)("div",{key:e.$uid},(0,s.zw)(e.$message),1)))),128))])),_:1},8,["modelValue","error"])])),_:1}),(0,i.Wm)(u,null,{default:(0,i.w5)((()=>[(0,i.Wm)(l,{class:"full-width",color:"primary",label:"Iniciar",type:"submit"})])),_:1})])),_:1},8,["onSubmit"])])),_:1})}}});var h=n(1639),g=n(4458),v=n(3190),w=n(8326),_=n(6611),y=n(1821),b=n(4455),E=n(9984),S=n.n(E);const k=(0,h.Z)(f,[["__scopeId","data-v-1978cbaa"]]),N=k;S()(f,"components",{QCard:g.Z,QCardSection:v.Z,QForm:w.Z,QInput:_.Z,QCardActions:y.Z,QBtn:b.Z});var A=n(4072),I=n(8910);const T=(0,i.aZ)({setup(e){const t=(0,l.Ey)(l.ju),n=(0,l.Ey)(l.Tc),a=(0,I.tv)();function o(){"admin"===t.mode?a.push({name:A.I.ADMIN_CLIENTS}):"manager"===t.mode?a.push({name:A.I.ADMIN_HOME}):a.push({name:A.I.AGENT_HOME})}return(0,i.wF)((()=>{n.load(),n.api_token&&o()})),(e,t)=>{const n=(0,i.up)("q-page"),a=(0,i.up)("q-page-container"),s=(0,i.up)("q-layout");return(0,i.wg)(),(0,i.j4)(s,{view:"lHh Lpr lff"},{default:(0,i.w5)((()=>[(0,i.Wm)(a,{class:"bg-grey-9"},{default:(0,i.w5)((()=>[(0,i.Wm)(n,null,{default:(0,i.w5)((()=>[(0,i.Wm)(N,{class:"absolute-center",onAuth:o})])),_:1})])),_:1})])),_:1})}}});var x=n(7605),W=n(2133),U=n(9885);const P=T,$=P;S()(T,"components",{QLayout:x.Z,QPageContainer:W.Z,QPage:U.Z})}},t={};function n(i){var a=t[i];if(void 0!==a)return a.exports;var o=t[i]={exports:{}};return e[i].call(o.exports,o,o.exports,n),o.exports}n.m=e,(()=>{var e=[];n.O=(t,i,a,o)=>{if(!i){var s=1/0;for(c=0;c<e.length;c++){for(var[i,a,o]=e[c],r=!0,l=0;l<i.length;l++)(!1&o||s>=o)&&Object.keys(n.O).every((e=>n.O[e](i[l])))?i.splice(l--,1):(r=!1,o<s&&(s=o));if(r){e.splice(c--,1);var u=a();void 0!==u&&(t=u)}}return t}o=o||0;for(var c=e.length;c>0&&e[c-1][2]>o;c--)e[c]=e[c-1];e[c]=[i,a,o]}})(),(()=>{n.n=e=>{var t=e&&e.__esModule?()=>e["default"]:()=>e;return n.d(t,{a:t}),t}})(),(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(i,a){if(1&a&&(i=this(i)),8&a)return i;if("object"===typeof i&&i){if(4&a&&i.__esModule)return i;if(16&a&&"function"===typeof i.then)return i}var o=Object.create(null);n.r(o);var s={};e=e||[null,t({}),t([]),t(t)];for(var r=2&a&&i;"object"==typeof r&&!~e.indexOf(r);r=t(r))Object.getOwnPropertyNames(r).forEach((e=>s[e]=()=>i[e]));return s["default"]=()=>i,n.d(o,s),o}})(),(()=>{n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})}})(),(()=>{n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce(((t,i)=>(n.f[i](e,t),t)),[]))})(),(()=>{n.u=e=>"js/"+(64===e?"chunk-common":e)+"."+{64:"e00088ce",69:"7c4fc034",175:"ceaba666",199:"ecf82a03",348:"79deb6fc",395:"957f5d7d",399:"d7df90f8",431:"fbec0fb2",496:"7ca3c4d0",527:"7e73fe2e",562:"925a01de",723:"4a2e8e3b",842:"46436bd3",855:"f1a9f199",996:"a7067868",997:"2441d398"}[e]+".js"})(),(()=>{n.miniCssF=e=>"css/"+{143:"app",736:"vendor"}[e]+"."+{143:"ffeadbce",736:"c8f65e12"}[e]+".css"})(),(()=>{n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()})(),(()=>{n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t)})(),(()=>{var e={},t="sherlock-godjango-admin-ui:";n.l=(i,a,o,s)=>{if(e[i])e[i].push(a);else{var r,l;if(void 0!==o)for(var u=document.getElementsByTagName("script"),c=0;c<u.length;c++){var d=u[c];if(d.getAttribute("src")==i||d.getAttribute("data-webpack")==t+o){r=d;break}}r||(l=!0,r=document.createElement("script"),r.charset="utf-8",r.timeout=120,n.nc&&r.setAttribute("nonce",n.nc),r.setAttribute("data-webpack",t+o),r.src=i),e[i]=[a];var m=(t,n)=>{r.onerror=r.onload=null,clearTimeout(p);var a=e[i];if(delete e[i],r.parentNode&&r.parentNode.removeChild(r),a&&a.forEach((e=>e(n))),t)return t(n)},p=setTimeout(m.bind(null,void 0,{type:"timeout",target:r}),12e4);r.onerror=m.bind(null,r.onerror),r.onload=m.bind(null,r.onload),l&&document.head.appendChild(r)}}})(),(()=>{n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}})(),(()=>{n.p="/admin/"})(),(()=>{var e={143:0};n.f.j=(t,i)=>{var a=n.o(e,t)?e[t]:void 0;if(0!==a)if(a)i.push(a[2]);else{var o=new Promise(((n,i)=>a=e[t]=[n,i]));i.push(a[2]=o);var s=n.p+n.u(t),r=new Error,l=i=>{if(n.o(e,t)&&(a=e[t],0!==a&&(e[t]=void 0),a)){var o=i&&("load"===i.type?"missing":i.type),s=i&&i.target&&i.target.src;r.message="Loading chunk "+t+" failed.\n("+o+": "+s+")",r.name="ChunkLoadError",r.type=o,r.request=s,a[1](r)}};n.l(s,l,"chunk-"+t,t)}},n.O.j=t=>0===e[t];var t=(t,i)=>{var a,o,[s,r,l]=i,u=0;if(s.some((t=>0!==e[t]))){for(a in r)n.o(r,a)&&(n.m[a]=r[a]);if(l)var c=l(n)}for(t&&t(i);u<s.length;u++)o=s[u],n.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return n.O(c)},i=self["webpackChunksherlock_godjango_admin_ui"]=self["webpackChunksherlock_godjango_admin_ui"]||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))})();var i=n.O(void 0,[736],(()=>n(7791)));i=n.O(i)})();